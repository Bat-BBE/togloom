<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‚öΩ –•”©–ª–±”©–º–±”©–≥–∏–π–Ω –¢–æ–≥–ª–æ–æ–º</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(to bottom, #1a2a3a, #2d3b4a);
      font-family: "Segoe UI", sans-serif;
      text-align: center;
      color: white;
      overflow: hidden;
      user-select: none;
    }
    h1 {
      margin-top: 20px;
      color: #4fc3f7;
      text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
      font-size: 2.5rem;
    }
    #game-info {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin: 15px auto;
      max-width: 900px;
    }
    #scoreboard {
      font-size: 28px;
      color: #ffffff;
      background: rgba(0, 0, 0, 0.3);
      padding: 15px 30px;
      border-radius: 25px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
    }
    #timer {
      font-size: 28px;
      color: #ffffff;
      background: rgba(0, 0, 0, 0.3);
      padding: 15px 30px;
      border-radius: 25px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
    }
    canvas {
      display: block;
      margin: 20px auto;
      border: 8px solid #4fc3f7;
      background-color: #2e7d32;
      border-radius: 15px;
      box-shadow: 0 0 30px rgba(0,0,0,0.6);
    }
    #winner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 40px;
      color: #ffeb3b;
      font-weight: bold;
      text-shadow: 0 0 15px rgba(255, 235, 59, 0.7);
      background: rgba(0,0,0,0.7);
      padding: 20px 40px;
      border-radius: 15px;
      display: none;
      z-index: 10;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.05); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }
    #instructions {
      position: relative;
      color: #b0bec5;
      font-size: 16px;
      margin-bottom: 15px;
    }
    #restartBtn {
      position: absolute;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(to right, #4fc3f7, #2196f3);
      color: white;
      border: none;
      padding: 12px 30px;
      font-size: 20px;
      border-radius: 30px;
      cursor: pointer;
      margin-top: 10px;
      display: none;
      box-shadow: 0 0 15px rgba(79, 195, 247, 0.7);
      transition: all 0.3s ease;
    }
    #restartBtn:hover {
      background: linear-gradient(to right, #3fb3e5, #1e88e5);
      transform: translateX(-50%) scale(1.05);
    }
    .player-label {
      position: absolute;
      font-weight: bold;
      font-size: 18px;
      background: rgba(0,0,0,0.5);
      padding: 5px 15px;
      border-radius: 20px;
    }
    #player1-label {
      top: 80px;
      left: 50px;
      color: #64b5f6;
      border: 2px solid #64b5f6;
    }
    #player2-label {
      top: 80px;
      right: 50px;
      color: #ef5350;
      border: 2px solid #ef5350;
    }
    #countdown {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 72px;
      color: white;
      text-shadow: 0 0 20px rgba(255,255,255,0.8);
      z-index: 5;
      display: none;
    }
    .goal-effect {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: rgba(255,255,255,0.7);
      z-index: 8;
      display: none;
      animation: flash 0.5s;
    }
    @keyframes flash {
      0% { opacity: 0.8; }
      100% { opacity: 0; }
    }
    .particle {
      position: absolute;
      background-color: #ffeb3b;
      border-radius: 50%;
      pointer-events: none;
      z-index: 7;
    }
    #goal-notification {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 36px;
      font-weight: bold;
      color: white;
      text-shadow: 0 0 10px rgba(0,0,0,0.8);
      background: rgba(0,0,0,0.6);
      padding: 15px 30px;
      border-radius: 10px;
      display: none;
      z-index: 9;
    }
    #fun-fact {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 700px;
      font-size: 16px;
      color: #b0bec5;
      background: rgba(0,0,0,0.5);
      padding: 10px 15px;
      border-radius: 10px;
      display: none;
    }
    .goal-star {
      position: absolute;
      font-size: 24px;
      color: gold;
      opacity: 0;
      z-index: 6;
      animation: star-fly 1.5s ease-out;
    }
    @keyframes star-fly {
      0% { transform: scale(0); opacity: 0; }
      20% { opacity: 1; }
      100% { transform: translate(var(--tx), var(--ty)) scale(1.5); opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>‚öΩ –•”©–ª–±”©–º–±”©–≥–∏–π–Ω –¢–æ–≥–ª–æ–æ–º</h1>
  <div id="player1-label" class="player-label">–¢–æ–≥–ª–æ–≥—á 1 (WASD)</div>
  <div id="player2-label" class="player-label">–¢–æ–≥–ª–æ–≥—á 2 (‚Üê‚Üë‚Üì‚Üí)</div>
  <div id="instructions">–¢“Ø—Ä“Ø“Ø–ª–∂ 5 –≥–æ–æ–ª –æ—Ä—É—É–ª—Å–∞–Ω –±–æ–ª–æ–Ω —Ö—É–≥–∞—Ü–∞–∞ –¥—É—É—Å–∞—Ö–∞–¥ —Ö—ç–Ω –∏—Ö –≥–æ–æ–ª –æ—Ä—É—É–ª—Å–∞–Ω –Ω—å —è–ª–Ω–∞!</div>
  <div id="game-info">
    <div id="scoreboard">
      üü¶ –¢–æ–≥–ª–æ–≥—á 1: <span id="score1">0</span> &nbsp;|&nbsp;
      üü• –¢–æ–≥–ª–æ–≥—á 2: <span id="score2">0</span>
    </div>
    <div id="timer">‚è±Ô∏è 02:00</div>
  </div>
  <canvas id="gameCanvas" width="900" height="400"></canvas>
  <div id="winner"></div>
  <div id="countdown"></div>
  <div id="goalEffect" class="goal-effect"></div>
  <div id="goal-notification"></div>
  <div id="fun-fact"></div>
  <button id="restartBtn">–î–∞—Ö–∏–Ω —Ç–æ–≥–ª–æ—Ö</button>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const restartBtn = document.getElementById("restartBtn");
    const winnerDisplay = document.getElementById("winner");
    const countdownDisplay = document.getElementById("countdown");
    const goalEffect = document.getElementById("goalEffect");
    const timerDisplay = document.getElementById("timer");
    const goalNotification = document.getElementById("goal-notification");
    const funFactDisplay = document.getElementById("fun-fact");
    // –•”©–ª–±”©–º–±”©–≥–∏–π–Ω —Å–æ–Ω–∏—Ä—Ö–æ–ª—Ç–æ–π –±–∞—Ä–∏–º—Ç—É—É–¥
    const funFacts = [
      "–•”©–ª–±”©–º–±”©–≥ –Ω—å –¥—ç–ª—Ö–∏–π –¥—ç—ç—Ä—Ö —Ö–∞–º–≥–∏–π–Ω –∞–ª–¥–∞—Ä—Ç–∞–π —Å–ø–æ—Ä—Ç —é–º.",
      "–•–∞–º–≥–∏–π–Ω —Ö—É—Ä–¥–∞–Ω –≥–æ–æ–ª—ã–≥ 2.8 —Å–µ–∫—É–Ω–¥—ã–Ω –¥–æ—Ç–æ—Ä –ù–∞–≤–∞—Ä–æ –±–∞–≥—ã–Ω —Ç–æ–≥–ª–æ–≥—á –†–∏–∫–∞—Ä–¥–æ –û–ª–∏–≤–µ—Ä–∞ –æ—Ä—É—É–ª—Å–∞–Ω.",
      "–î—ç–ª—Ö–∏–π–Ω –∞–≤–∞—Ä–≥–∞ –±–æ–ª—Å–æ–Ω —Ö–∞–º–≥–∏–π–Ω –∑–∞–ª—É—É —Ç–æ–≥–ª–æ–≥—á –Ω—å 17 –Ω–∞—Å—Ç–∞–π–¥–∞–∞ –ü–µ–ª–µ —é–º.",
      "–•”©–ª–±”©–º–±”©–≥–∏–π–Ω –±”©–º–±”©–≥–Ω–∏–π –∂–∏–Ω 410-450 –≥—Ä–∞–º–º, –¥–∞—Ä–∞–ª—Ç –Ω—å 0.6-1.1 –∞—Ç–º–æ—Å—Ñ–µ—Ä –±–∞–π–¥–∞–≥.",
      "–ë—Ä–∞–∑–∏–ª—ã–Ω —Ç–æ–≥–ª–æ–≥—á –ü–µ–ª–µ –Ω—å –∞–ª–±–∞–Ω —ë—Å–æ–æ—Ä 1281 –≥–æ–æ–ª –æ—Ä—É—É–ª—Å–∞–Ω –¥—ç–ª—Ö–∏–π–Ω —Ä–µ–∫–æ—Ä–¥—Ç–æ–π.",
      "–•–∞–º–≥–∏–π–Ω —É—Ä—Ç —Ç–æ–≥–ª–æ–ª—Ç 3 —Ü–∞–≥ 30 –º–∏–Ω—É—Ç “Ø—Ä–≥—ç–ª–∂–∏–ª—Å—ç–Ω (–ê–Ω–≥–ª–∏–π–Ω –±–∞–≥—É—É–¥—ã–Ω —Ç–æ–≥–ª–æ–ª—Ç).",
      "–•”©–ª–±”©–º–±”©–≥–∏–π–Ω –¥“Ø—Ä–º–∏–π–≥ 1863 –æ–Ω–¥ –ê–Ω–≥–ª–∏–¥ –±–æ–ª–æ–≤—Å—Ä—É—É–ª—Å–∞–Ω.",
      "–ú–æ–Ω–≥–æ–ª–¥ —Ö”©–ª–±”©–º–±”©–≥ 1950-–∞–∞–¥ –æ–Ω—ã —ç—Ö—ç–Ω “Ø–µ—ç—Å —Ç–æ–≥–ª–æ–∂ —ç—Ö—ç–ª—Å—ç–Ω.",
      "–•–∞–º–≥–∏–π–Ω ”©–Ω–¥”©—Ä —Ö”©–ª–±”©–º–±”©–≥—á–∏–Ω –Ω—å 2.08 –º–µ—Ç—Ä ”©–Ω–¥”©—Ä—Ç—ç–π –ö—Ä–∏—Å—Ç–æ—Ñ–µ—Ä –°–∞–º–±–∞ —é–º.",
      "–•–∞–º–≥–∏–π–Ω –æ–ª–æ–Ω “Ø–∑—ç–≥—á—Ç—ç–π —Ç–æ–≥–ª–æ–ª—Ç 199,854 —Ö“Ø–Ω “Ø–∑—Å—ç–Ω (–ë—Ä–∞–∑–∏–ª vs –£—Ä—É–≥–≤–∞–π, 1950)"
    ];
    // –¢–æ–≥–ª–æ–≥—á–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ
    const player1 = { 
      x: 150, 
      y: 750, 
      size: 20, 
      color: "#64b5f6",
      speed: 6,
      controls: { up: "w", down: "s", left: "a", right: "d" }
    };
    const player2 = { 
      x: 750, 
      y: 150, 
      size: 20, 
      color: "#ef5350",
      speed: 6,
      controls: { up: "ArrowUp", down: "ArrowDown", left: "ArrowLeft", right: "ArrowRight" }
    };
    // –ë”©–º–±”©–≥–Ω–∏–π —Ç–æ—Ö–∏—Ä–≥–æ–æ
    const ball = { 
      x: 450, 
      y: 200, 
      vx: 0, 
      vy: 0, 
      size: 8,
      maxSpeed: 12,
      friction: 0.98
    };
    // –¢–æ–≥–ª–æ–æ–º—ã–Ω —Ö—É–≤—å—Å–∞–≥—á–∏–¥
    let score1 = 0;
    let score2 = 0;
    let keys = {};
    let gameRunning = false;
    let lastTime = 0;
    let deltaTime = 0;
    let particles = [];
    let gameStartTime = 0;
    let gameTimeLeft = 120; // 2 –º–∏–Ω—É—Ç = 120 —Å–µ–∫—É–Ω–¥
    let timerInterval;
    let isGoalScored = false;
    let maxGoals = 5; // –•–æ–∂–æ—Ö–æ–¥ —à–∞–∞—Ä–¥–∞–≥–¥–∞—Ö –≥–æ–æ–ª—ã–Ω —Ç–æ–æ
    let isPuased = false; // –¢–æ–≥–ª–æ–æ–º –∑–æ–≥—Å—Å–æ–Ω —ç—Å—ç—Ö
    // –¢–æ–≤—á–ª—É—É—Ä –¥–∞—Ä–∞—Ö
    document.addEventListener("keydown", (e) => {
      keys[e.key] = true;
      // Space –±–∞ Backspace —Ç–æ–≤—á–ª—É—É—Ä–∞–∞—Ä –¥–∞—Ö–∏–Ω —ç—Ö–ª“Ø“Ø–ª—ç—Ö
      if ((e.key === " " || e.key === "Backspace") && !gameRunning) {
        restartGame();
      }
    });
    document.addEventListener("keyup", (e) => keys[e.key] = false);
    
    restartBtn.addEventListener("click", restartGame);
    // –¢–æ–≥–ª–æ–æ–º—ã–Ω —Ç–∞–ª–±–∞–π –∑—É—Ä–∞—Ö
    function drawField() {
      // –ù–æ–≥–æ–æ–Ω —Ç–∞–ª–±–∞–π
      const fieldGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      fieldGradient.addColorStop(0, "#2e7d32");
      fieldGradient.addColorStop(1, "#1b5e20");
      ctx.fillStyle = fieldGradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height); 
      // –¢”©–≤–∏–π–Ω —à—É–≥–∞–º
      ctx.strokeStyle = "#ffffff80";
      ctx.lineWidth = 4;
      ctx.setLineDash([20, 15]);
      ctx.beginPath();
      ctx.moveTo(canvas.width / 2, 0);
      ctx.lineTo(canvas.width / 2, canvas.height);
      ctx.stroke();
      ctx.setLineDash([]);    
      // –¢”©–≤–∏–π–Ω —Ç–æ–π—Ä–æ–≥
      ctx.beginPath();
      ctx.arc(canvas.width / 2, canvas.height / 2, 70, 0, Math.PI * 2);
      ctx.stroke(); 
      // –•–∞–∞–ª–≥–∞–Ω—É—É–¥
      ctx.fillStyle = "#ffffff80";
      ctx.fillRect(0, canvas.height/2 - 75, 20, 150); // –ó“Ø“Ø–Ω —Ö–∞–∞–ª–≥–∞
      ctx.fillRect(canvas.width - 20, canvas.height/2 - 75, 20, 150); // –ë–∞—Ä—É—É–Ω —Ö–∞–∞–ª–≥–∞
      // –ó“Ø“Ø–Ω —Ç–∞–ª—ã–Ω —Ç–æ—Ä–≥—É—É–ª–∏–π–Ω —à—É–≥–∞–º
      ctx.stroke();
      ctx.strokeRect(780, 80, 120, 240);
      // –ë–∞—Ä—É—É–Ω —Ç–∞–ª—ã–Ω —Ç–æ—Ä–≥—É—É–ª–∏–π–Ω —à—É–≥–∞–º
      ctx.strokeRect(0, 80, 120, 240);   
      // –•–∞–∞–ª–≥–∞–Ω–¥ line
      ctx.strokeStyle = "#ffffff60";
      ctx.lineWidth = 2;     
      // –ó“Ø“Ø–Ω —Ö–∞–∞–ª–≥–∞–Ω–¥ line
      ctx.beginPath();
      ctx.moveTo(20, canvas.height/2 - 75);
      ctx.lineTo(50, canvas.height/2 - 75);
      ctx.lineTo(50, canvas.height/2 + 75);
      ctx.lineTo(20, canvas.height/2 + 75);
      ctx.stroke();
      // –ë–∞—Ä—É—É–Ω —Ö–∞–∞–ª–≥–∞–Ω–¥ line
      ctx.beginPath();
      ctx.moveTo(canvas.width - 20, canvas.height/2 - 75);
      ctx.lineTo(canvas.width - 50, canvas.height/2 - 75);
      ctx.lineTo(canvas.width - 50, canvas.height/2 + 75);
      ctx.lineTo(canvas.width - 20, canvas.height/2 + 75);
      ctx.stroke();
      // –¢–∞–ª–±–∞–π–Ω —Ö“Ø—Ä—ç—ç
      ctx.strokeStyle = "#ffffff60";
      ctx.lineWidth = 8;
      ctx.strokeRect(0, 0, canvas.width, canvas.height);
      // –ì–æ–æ–ª—ã–Ω —à—É–≥–∞–º (5 –≥–æ–æ–ª —Ö“Ø—Ä—Ç—ç–ª)
      ctx.fillStyle = "#ffffff80";
      ctx.font = "20px Arial";
      ctx.fillText(`${maxGoals} –≥–æ–æ–ª —Ö“Ø—Ä—Ç—ç–ª`, canvas.width/2 - 50, 30);
    }
    // –¢–æ–≥–ª–æ–≥—á –∑—É—Ä–∞—Ö
    function drawPlayer(player) {
      // –¢–æ–≥–ª–æ–≥—á–∏–π–Ω –±–∏–µ
      const gradient = ctx.createRadialGradient(
        player.x - player.size/3, 
        player.y - player.size/3, 
        player.size/4, 
        player.x, 
        player.y, 
        player.size
      );
      gradient.addColorStop(0, player.color);
      gradient.addColorStop(1, darkenColor(player.color, 20));
      
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.arc(player.x, player.y, player.size, 0, Math.PI * 2);
      ctx.fill();
      // –¢–æ–≥–ª–æ–≥—á–∏–π–Ω –≥–∞–¥–∞—Ä–≥—É—É–≥–∏–π–Ω –≥—ç—Ä—ç–ª—Ç—ç–ª—Ç
      ctx.fillStyle = "#ffffff90";
      ctx.beginPath();
      ctx.arc(
        player.x - player.size/3, 
        player.y - player.size/3, 
        player.size/4, 
        0, 
        Math.PI * 2
      );
      ctx.fill();
      // –¢–æ–≥–ª–æ–≥—á–∏–π–Ω —Ö“Ø—Ä—ç—ç
      ctx.strokeStyle = "#00000030";
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.arc(player.x, player.y, player.size, 0, Math.PI * 2);
      ctx.stroke();
    }
    // ”®–Ω–≥”© —Ö–∞—Ä—É—É–ª–∞—Ö
    function darkenColor(color, percent) {
      const num = parseInt(color.replace("#", ""), 16);
      const amt = Math.round(2.55 * percent);
      const R = (num >> 16) - amt;
      const G = (num >> 8 & 0x00FF) - amt;
      const B = (num & 0x0000FF) - amt;
      return "#" + (
        0x1000000 +
        (R < 0 ? 0 : R) * 0x10000 +
        (G < 0 ? 0 : G) * 0x100 +
        (B < 0 ? 0 : B)
      ).toString(16).slice(1);
    }
    // –ë”©–º–±”©–≥ –∑—É—Ä–∞—Ö
    function drawBall() {
      // –ë”©–º–±”©–≥–Ω–∏–π “Ø–Ω–¥—Å—ç–Ω —Ö—ç—Å—ç–≥
      const gradient = ctx.createRadialGradient(
        ball.x - ball.size/3, 
        ball.y - ball.size/3, 
        0, 
        ball.x, 
        ball.y, 
        ball.size
      );
      gradient.addColorStop(0, "#ffffff");
      gradient.addColorStop(0.7, "#e0e0e0");
      gradient.addColorStop(1, "#bdbdbd");

      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.size, 0, Math.PI * 2);
      ctx.fill();   
      // –ë”©–º–±”©–≥–Ω–∏–π —Ö—ç—ç
      ctx.strokeStyle = "#00000020";
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.size - 2, 0, Math.PI * 2);
      ctx.stroke();
      
      ctx.beginPath();
      ctx.moveTo(ball.x - ball.size, ball.y);
      ctx.lineTo(ball.x + ball.size, ball.y);
      ctx.stroke();
      
      ctx.beginPath();
      ctx.moveTo(ball.x, ball.y - ball.size);
      ctx.lineTo(ball.x, ball.y + ball.size);
      ctx.stroke(); 
      // –ë”©–º–±”©–≥–Ω–∏–π –≥—ç—Ä—ç–ª
      if (ball.vx !== 0 || ball.vy !== 0) {
        const speed = Math.min(1, Math.sqrt(ball.vx * ball.vx + ball.vy * ball.vy) / ball.maxSpeed);
        ctx.fillStyle = `rgba(255, 255, 255, ${speed * 0.3})`;
        ctx.beginPath();
        ctx.arc(ball.x, ball.y, ball.size * (1 + speed * 0.5), 0, Math.PI * 2);
        ctx.fill();
      }
    }
    // –¢–æ–≥–ª–æ–≥—á–¥—ã–Ω –±–∞–π—Ä–ª–∞–ª —à–∏–Ω—ç—á–ª—ç—Ö
    function updatePlayers() {
      if(isPuased) return; // –¢–æ–≥–ª–æ–æ–º –∑–æ–≥—Å—Å–æ–Ω –±–æ–ª —à–∏–Ω—ç—á–ª—ç—Ö–≥“Ø–π
      // –¢–æ–≥–ª–æ–≥—á 1
      if (keys[player1.controls.up]) player1.y -= player1.speed;
      if (keys[player1.controls.down]) player1.y += player1.speed;
      if (keys[player1.controls.left]) player1.x -= player1.speed;
      if (keys[player1.controls.right]) player1.x += player1.speed;
      // –¢–æ–≥–ª–æ–≥—á 2
      if (keys[player2.controls.up]) player2.y -= player2.speed;
      if (keys[player2.controls.down]) player2.y += player2.speed;
      if (keys[player2.controls.left]) player2.x -= player2.speed;
      if (keys[player2.controls.right]) player2.x += player2.speed;
      // –•–∞–Ω–∞–Ω–¥ –º”©—Ä–≥”©—Ö”©”©—Å —Å—ç—Ä–≥–∏–π–ª—ç—Ö
      [player1, player2].forEach(p => {
        p.x = Math.max(p.size, Math.min(canvas.width - p.size, p.x));
        p.y = Math.max(p.size, Math.min(canvas.height - p.size, p.y));
      });
    }
    // –ë”©–º–±”©–≥ —à–∏–Ω—ç—á–ª—ç—Ö
    function updateBall() {
      if (isGoalScored) return; // –•—ç—Ä—ç–≤ –∞–ª—å —Ö—ç–¥–∏–π–Ω –≥–æ–æ–ª –æ—Ä—Å–æ–Ω –±–æ–ª —Ü–∞–∞—à “Ø—Ä–≥—ç–ª–∂–ª—ç—Ö–≥“Ø–π
      // –•—É—Ä–¥–Ω—ã “Ø—Ä—ç–ª—Ç–∏–π–Ω —ç—Ñ—Ñ–µ–∫—Ç
      ball.vx *= ball.friction;
      ball.vy *= ball.friction;    
      // –•—ç—Ä—ç–≤ —Ö—É—Ä–¥ –º–∞—à –±–∞–≥–∞ –±–æ–ª –∑–æ–≥—Å–æ–æ—Ö
      if (Math.abs(ball.vx) < 0.1) ball.vx = 0;
      if (Math.abs(ball.vy) < 0.1) ball.vy = 0;    
      // –ë”©–º–±”©–≥–Ω–∏–π —Ö”©–¥”©–ª–≥”©”©–Ω
      ball.x += ball.vx * deltaTime;
      ball.y += ball.vy * deltaTime;
      // –•–∞–Ω–∞–Ω–¥ –º”©—Ä–≥”©—Ö (–¥—ç—ç–¥ –±–∞ –¥–æ–æ–¥)
      if (ball.y < ball.size || ball.y > canvas.height - ball.size) {
        ball.vy *= -0.9; // –≠–Ω–µ—Ä–≥–∏ –∞–ª–¥–∞–≥–¥–∞—Ö
        ball.y = Math.max(ball.size, Math.min(canvas.height - ball.size, ball.y));
        createParticles(ball.x, ball.y, 5, "#ffffff");
      }
      // –•–∞–∞–ª–≥–∞–Ω–¥ –æ—Ä–æ—Ö–≥“Ø–π –±–∞–π—Ö (–∑“Ø“Ø–Ω –±–∞ –±–∞—Ä—É—É–Ω)
      if (ball.x < ball.size) {
        // –•–∞–∞–ª–≥–∞–Ω–¥ –æ—Ä–æ–≤–æ–ª –≥–æ–æ–ª
        if (ball.y > canvas.height/2 - 75 && ball.y < canvas.height/2 + 75) {
          score2++;
          document.getElementById("score2").textContent = score2;
          showGoalEffect();
          showGoalNotification("–¢–æ–≥–ª–æ–≥—á 2 –≥–æ–æ–ª –æ—Ä—É—É–ª–ª–∞–∞!", "#ef5350");
          createParticles(ball.x, ball.y, 30, "#ef5350");
          createGoalStars(10, "#ef5350");
          isGoalScored = true;
          showRandomFunFact();
          setTimeout(() => {
            resetBall();
            isGoalScored = false; // –î–∞—Ö–∏–Ω –æ–Ω–æ–æ –∞–≤–∞—Ö –±–æ–ª–æ–º–∂—Ç–æ–π –±–æ–ª–≥–æ–Ω–æ
            checkWinCondition();
          }, 1000);
          return;
        }
        // –•–∞–∞–ª–≥–∞–Ω –¥—ç—ç—Ä –º”©—Ä–≥”©–≤”©–ª –±—É—Ü–¥–∞–≥
        ball.vx *= -0.8;
        ball.x = ball.size;
        createParticles(ball.x, ball.y, 5, "#ffffff");
      }   
      if (ball.x > canvas.width - ball.size) {
        // –•–∞–∞–ª–≥–∞–Ω–¥ –æ—Ä–æ–≤–æ–ª –≥–æ–æ–ª
        if (ball.y > canvas.height/2 - 75 && ball.y < canvas.height/2 + 75) {
          score1++;
          document.getElementById("score1").textContent = score1;
          showGoalEffect();
          showGoalNotification("–¢–æ–≥–ª–æ–≥—á 1 –≥–æ–æ–ª –æ—Ä—É—É–ª–ª–∞–∞!", "#64b5f6");
          createParticles(ball.x, ball.y, 30, "#64b5f6");
          createGoalStars(10, "#64b5f6");
          isGoalScored = true;
          showRandomFunFact();
          setTimeout(() => {
            resetBall();
            isGoalScored = false; // –î–∞—Ö–∏–Ω –æ–Ω–æ–æ –∞–≤–∞—Ö –±–æ–ª–æ–º–∂—Ç–æ–π –±–æ–ª–≥–æ–Ω–æ
            checkWinCondition();
          }, 1000);
          return;
        }
        // –•–∞–∞–ª–≥–∞–Ω –¥—ç—ç—Ä –º”©—Ä–≥”©–≤”©–ª –±—É—Ü–¥–∞–≥
        ball.vx *= -0.8;
        ball.x = canvas.width - ball.size;
        createParticles(ball.x, ball.y, 5, "#ffffff");
      }
      // –¢–æ–≥–ª–æ–≥—á—Ç–æ–π –º”©—Ä–≥”©–ª–¥”©—Ö
      [player1, player2].forEach(p => {
        const dx = ball.x - p.x;
        const dy = ball.y - p.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance < p.size + ball.size) {
          // –ú”©—Ä–≥”©–ª–¥”©”©–Ω–∏–π ”©–Ω—Ü”©–≥
          const angle = Math.atan2(dy, dx);        
          // –¢–æ–≥–ª–æ–≥—á —Ö”©–¥”©–ª–∂ –±–∞–π–≥–∞–∞ —á–∏–≥–ª—ç–ª—ç—ç—Ä —Ö—É—Ä–¥ –Ω—ç–º—ç–≥–¥—ç–Ω—ç
          let playerSpeedX = 0;
          let playerSpeedY = 0;   
          if (p === player1) {
            if (keys[player1.controls.left]) playerSpeedX = -2;
            if (keys[player1.controls.right]) playerSpeedX = 2;
            if (keys[player1.controls.up]) playerSpeedY = -2;
            if (keys[player1.controls.down]) playerSpeedY = 2;
          } else {
            if (keys[player2.controls.left]) playerSpeedX = -2;
            if (keys[player2.controls.right]) playerSpeedX = 2;
            if (keys[player2.controls.up]) playerSpeedY = -2;
            if (keys[player2.controls.down]) playerSpeedY = 2;
          }       
          // –ë”©–º–±”©–≥–Ω–∏–π —Ö—É—Ä–¥
          const power = 7 + Math.sqrt(playerSpeedX*playerSpeedX + playerSpeedY*playerSpeedY);
          ball.vx = Math.cos(angle) * power + playerSpeedX;
          ball.vy = Math.sin(angle) * power + playerSpeedY;       
          // –•—É—Ä–¥ —Ö—ç—Ç –∏—Ö –±–æ–ª–≥–æ—Ö–≥“Ø–π
          const speed = Math.sqrt(ball.vx * ball.vx + ball.vy * ball.vy);
          if (speed > ball.maxSpeed) {
            ball.vx = (ball.vx / speed) * ball.maxSpeed;
            ball.vy = (ball.vy / speed) * ball.maxSpeed;
          }       
          // –ë”©–º–±”©–≥ —Ç–æ–≥–ª–æ–≥—á–æ–æ—Å —Ç—É—Å–≥–∞–∞—Ä–ª–∞—Ö
          const overlap = (p.size + ball.size) - distance;
          ball.x += Math.cos(angle) * overlap * 0.5;
          ball.y += Math.sin(angle) * overlap * 0.5;         
          // –ú”©—Ä–≥”©–ª–¥”©”©–Ω–∏–π “Ø–µ–¥ particle “Ø“Ø—Å–≥—ç—Ö
          createParticles(ball.x, ball.y, 10, p.color);
        }
      });
    }
    // –ì–æ–æ–ª—ã–Ω –º—ç–¥—ç–≥–¥—ç–ª —Ö–∞—Ä—É—É–ª–∞—Ö
    function showGoalNotification(text, color) {
      goalNotification.textContent = text;
      goalNotification.style.color = color;
      goalNotification.style.display = "block";
      goalNotification.style.animation = "none";
      void goalNotification.offsetWidth; // Trigger reflow
      goalNotification.style.animation = "pulse 0.5s 3";
      
      setTimeout(() => {
        goalNotification.style.display = "none";
      }, 2000);
    }
    // –ì–æ–æ–ª—ã–Ω –æ–¥ “Ø“Ø—Å–≥—ç—Ö
    function createGoalStars(count, color) {
      for (let i = 0; i < count; i++) {
        const star = document.createElement("div");
        star.className = "goal-star";
        star.innerHTML = "‚òÖ";
        star.style.color = color;
        star.style.left = `${ball.x}px`;
        star.style.top = `${ball.y}px`;       
        // –°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π —á–∏–≥–ª—ç–ª–¥ –Ω–∏—Å—ç—Ö
        const angle = Math.random() * Math.PI * 2;
        const distance = 50 + Math.random() * 100;
        const tx = Math.cos(angle) * distance;
        const ty = Math.sin(angle) * distance;       
        star.style.setProperty("--tx", `${tx}px`);
        star.style.setProperty("--ty", `${ty}px`);      
        document.body.appendChild(star);      
        // –ê–Ω–∏–º–∞—Ü –¥—É—É—Å—Å–∞–Ω—ã –¥–∞—Ä–∞–∞ —É—Å—Ç–≥–∞—Ö
        setTimeout(() => {
          star.remove();
        }, 1500);
      }
    }
    // –°–æ–Ω–∏—Ä—Ö–æ–ª—Ç–æ–π –±–∞—Ä–∏–º—Ç —Ö–∞—Ä—É—É–ª–∞—Ö
    function showRandomFunFact() {
      const fact = funFacts[Math.floor(Math.random() * funFacts.length)];
      funFactDisplay.textContent = `üí° –•”©–ª–±”©–º–±”©–≥–∏–π–Ω –±–∞—Ä–∏–º—Ç: ${fact}`;
      funFactDisplay.style.display = "block";
      
      setTimeout(() => {
        funFactDisplay.style.display = "none";
      }, 5000);
    }
    // –ë”©–º–±”©–≥–Ω–∏–π –±–∞–π—Ä–ª–∞–ª –¥–∞—Ö–∏–Ω —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö
    function resetBall() {
      if (!gameRunning) return;
      
      ball.x = canvas.width / 2;
      ball.y = canvas.height / 2;
      ball.vx = 0;
      ball.vy = 0;

      player1.x = 150;
      player1.y = 200;
      player2.x = 750;
      player2.y = 200;
      
      isPuased = true; // –¢–æ–≥–ª–æ–æ–º –∑–æ–≥—Å—Å–æ–Ω
      // 3 —Å–µ–∫—É–Ω–¥—ã–Ω —Ç–æ–æ–ª—É—É—Ä
      countdownDisplay.style.display = "block";
      let count = 3;
      countdownDisplay.textContent = count;    
      const countdownInterval = setInterval(() => {
        count--;
        if (count > 0) {
          countdownDisplay.textContent = count;
        } else {
          countdownDisplay.textContent = "–≠–•–≠–õ–ù–≠!";
          setTimeout(() => {
            countdownDisplay.style.display = "none";
            ball.vx = (Math.random() > 0.5 ? 5 : -5);
            ball.vy = (Math.random() - 0.5) * 4;
            isPuased = false; // –¢–æ–≥–ª–æ–æ–º –¥–∞—Ö–∏–Ω —ç—Ö—ç–ª—Å—ç–Ω
          }, 500);
          clearInterval(countdownInterval);
        }
      }, 1000);
    }
    // –•–æ–∂–∏–≥–¥–ª—ã–Ω –Ω”©—Ö—Ü”©–ª —à–∞–ª–≥–∞—Ö
    function checkWinCondition() {
      if (score1 >= maxGoals || score2 >= maxGoals) {
        endGame();
      }
    }
    // –ì–æ–æ–ª—ã–Ω “Ø–µ–¥ –≥—è–ª–∞–ª–∑—Å–∞–Ω —ç—Ñ—Ñ–µ–∫—Ç
    function showGoalEffect() {
      goalEffect.style.display = "block";
      setTimeout(() => {
        goalEffect.style.display = "none";
      }, 100);
    }
    // –•—É–≥–∞—Ü–∞–∞–Ω—ã –¥—ç–≤–∂—ç—ç–≥ —à–∏–Ω—ç—á–ª—ç—Ö
    function updateTimer() {
      const minutes = Math.floor(gameTimeLeft / 60);
      const seconds = gameTimeLeft % 60;
      timerDisplay.textContent = `‚è±Ô∏è ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      if (gameTimeLeft <= 0) {
        endGame();
      } else {
        gameTimeLeft--;
      }
    }
    // –¢–æ–≥–ª–æ–æ–º –¥—É—É—Å–∞—Ö
    function endGame() {
      gameRunning = false;
      clearInterval(timerInterval);
      
      if (score1 > score2) {
        winnerDisplay.textContent = `üéâ –¢–æ–≥–ª–æ–≥—á 1 –•–û–ñ–õ–û–û! (${score1}-${score2}) üéâ`;
        createParticles(canvas.width/2, canvas.height/2, 100, "#64b5f6");
      } else if (score2 > score1) {
        winnerDisplay.textContent = `üéâ –¢–æ–≥–ª–æ–≥—á 2 –•–û–ñ–õ–û–û! (${score1}-${score2}) üéâ`;
        createParticles(canvas.width/2, canvas.height/2, 100, "#ef5350");
      } else {
        winnerDisplay.textContent = "ü§ù –¢—ç–Ω—Ü–ª—ç—ç! ü§ù";
        createParticles(canvas.width/2, canvas.height/2, 100, "#ffffff");
      }
      
      winnerDisplay.style.display = "block";
      restartBtn.style.display = "block";
    }
    // Particle “Ø“Ø—Å–≥—ç—Ö
    function createParticles(x, y, count, color) {
      for (let i = 0; i < count; i++) {
        particles.push({
          x: x,
          y: y,
          size: Math.random() * 5 + 2,
          color: color,
          vx: Math.random() * 6 - 3,
          vy: Math.random() * 6 - 3,
          life: 30 + Math.random() * 20
        });
      }
    }
    // Particle —à–∏–Ω—ç—á–ª—ç—Ö
    function updateParticles() {
      for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.life--;
        p.vy += 0.1; // –¢–∞—Ç–∞–ª—Ü–ª—ã–Ω —ç—Ñ—Ñ–µ–∫—Ç
        
        if (p.life <= 0) {
          particles.splice(i, 1);
        }
      }
    }
    // Particle –∑—É—Ä–∞—Ö
    function drawParticles() {
      particles.forEach(p => {
        ctx.fillStyle = p.color;
        ctx.globalAlpha = p.life / 50;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
      });
      ctx.globalAlpha = 1;
    }
    // –¢–æ–≥–ª–æ–æ–º –¥–∞—Ö–∏–Ω —ç—Ö–ª“Ø“Ø–ª—ç—Ö
    function restartGame() {
      score1 = 0;
      score2 = 0;
      document.getElementById("score1").textContent = "0";
      document.getElementById("score2").textContent = "0";
      winnerDisplay.style.display = "none";
      restartBtn.style.display = "none";
      particles = [];
      gameTimeLeft = 120;
      
      player1.x = 150;
      player1.y = 200;
      player2.x = 750;
      player2.y = 200;

      ball.maxSpeed += 0.5; // –ë”©–º–±”©–≥–Ω–∏–π —Ö—É—Ä–¥—ã–≥ –Ω—ç–º—ç–≥–¥“Ø“Ø–ª—ç—Ö
      
      gameRunning = true;
      gameStartTime = performance.now();   
      // –•—É–≥–∞—Ü–∞–∞–Ω—ã –¥—ç–≤–∂—ç—ç–≥ —ç—Ö–ª“Ø“Ø–ª—ç—Ö
      clearInterval(timerInterval);
      timerInterval = setInterval(updateTimer, 1000);
      updateTimer();
      
      resetBall();
      
      if (!lastTime) {
        lastTime = performance.now();
        requestAnimationFrame(gameLoop);
      }
    }
    // –¢–æ–≥–ª–æ–æ–º—ã–Ω –≥–æ–ª –¥–∞–≤—Ç–∞–ª—Ç
    function gameLoop(timestamp) {
      if (!lastTime) lastTime = timestamp;
      deltaTime = (timestamp - lastTime) / 16; // 60fps-–¥ –∑–æ—Ä–∏—É–ª—Å–∞–Ω normalize
      lastTime = timestamp;
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawField();
      
      if (gameRunning) {
        updatePlayers();
        updateBall();
      }     
      updateParticles();
      drawPlayer(player1);
      drawPlayer(player2);
      drawBall();
      drawParticles();
      
      requestAnimationFrame(gameLoop);
    }   
    // –¢–æ–≥–ª–æ–æ–º —ç—Ö–ª“Ø“Ø–ª—ç—Ö
    restartGame();
  </script>
</body>
</html>