<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üß† –û–Ω—å—Å–æ–≥–æ–Ω—ã –•–∞–∞–ª–≥–∞</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&family=Open+Sans:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    :root {
      --primary: #ff6f61;
      --secondary: #6b7280;
      --accent: #facc15;
      --dark: #1f2937;
      --light: #fefce8;
    }
    body {
      background: linear-gradient(135deg, #374151 0%, #111827 100%), url('https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80') no-repeat center center fixed;
      background-size: cover;
      background-blend-mode: overlay;
      font-family: "Roboto Slab", serif;
      padding: 2rem;
      text-align: center;
      color: var(--light);
      min-height: 100vh;
      overflow-x: hidden;
    }
    h1 {
      color: var(--accent);
      font-size: 3.2rem;
      margin-bottom: 2rem;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.6);
      animation: fadeInDown 1s ease-in-out;
      background: rgba(0, 0, 0, 0.4);
      padding: 1rem 2rem;
      border-radius: 20px;
      display: inline-block;
      border: 3px solid var(--accent);
    }
    .user-info {
      display: flex;
      justify-content: space-around;
      align-items: center;
      gap: 1.5rem;
      margin-bottom: 2.5rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      padding: 1.5rem;
      border-radius: 15px;
      font-size: 1.4rem;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
      animation: fadeIn 1.2s;
      border: 2px solid rgba(255, 255, 255, 0.15);
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    .user-info div {
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }
    .quiz-container {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(8px);
      padding: 2.5rem;
      border-radius: 20px;
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
      max-width: 750px;
      margin: 0 auto;
      animation: fadeIn 1.2s;
      border: 2px solid rgba(255, 255, 255, 0.1);
      position: relative;
    }
    .puzzle-animation {
      position: absolute;
      top: -50px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 3.5rem;
      animation: pulse 2s infinite;
      filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.4));
    }
    @keyframes pulse {
      0% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.2); }
      100% { transform: translateX(-50%) scale(1); }
    }
    .question-info {
      font-size: 1.3rem;
      color: var(--accent);
      margin-bottom: 1rem;
      font-weight: bold;
    }
    .question {
      font-size: 1.7rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
      color: var(--light);
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);
    }
    .options {
      display: grid;
      gap: 1rem;
    }
    .option {
      background: rgba(255, 255, 255, 0.12);
      padding: 1.3rem;
      border-radius: 12px;
      font-size: 1.3rem;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid rgba(255, 255, 255, 0.2);
      color: var(--light);
    }
    .option:hover {
      transform: scale(1.03);
      background: rgba(255, 255, 255, 0.25);
      border-color: var(--accent);
    }
    .option:active {
      transform: scale(0.97);
    }
    .option.correct {
      background: linear-gradient(90deg, #22c55e, #86efac);
      color: var(--light);
      transform: scale(1.03);
      animation: correctGlow 0.5s ease-in-out;
    }
    .option.incorrect {
      background: linear-gradient(90deg, #ef4444, #f87171);
      color: var(--light);
      transform: scale(0.97);
      animation: shake 0.3s ease-in-out;
    }
    @keyframes correctGlow {
      0% { box-shadow: 0 0 10px #22c55e; }
      50% { box-shadow: 0 0 20px #22c55e; }
      100% { box-shadow: 0 0 10px #22c55e; }
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      50% { transform: translateX(8px); }
      75% { transform: translateX(-8px); }
      100% { transform: translateX(0); }
    }
    .progress-container {
      margin-top: 1.5rem;
      width: 100%;
    }
    .progress-text {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 1rem;
      color: var(--light);
    }
    .progress-bar {
      height: 12px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 0%;
      transition: width 0.8s ease;
      border-radius: 6px;
    }
    .timer {
      font-size: 1.3rem;
      color: var(--accent);
      margin-top: 1.5rem;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    }
    .button-container {
      margin-top: 2rem;
      display: flex;
      justify-content: center;
      gap: 1.5rem;
    }
    .back-button, .restart-button {
      padding: 1rem 2rem;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      color: var(--light);
      border-radius: 12px;
      text-decoration: none;
      font-size: 1.3rem;
      transition: all 0.3s ease;
      cursor: pointer;
      border: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    .back-button:hover, .restart-button:hover {
      transform: scale(1.05);
      background: linear-gradient(90deg, var(--secondary), var(--primary));
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
    }
    .achievement-badge {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--light);
      padding: 0.8rem 1.2rem;
      border-radius: 10px;
      font-size: 1rem;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      gap: 0.6rem;
      z-index: 100;
      transform: translateX(150%);
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .achievement-badge.show {
      transform: translateX(0);
    }
    .achievement-icon {
      font-size: 1.6rem;
    }
    .confetti {
      position: fixed;
      width: 8px;
      height: 8px;
      background-color: var(--accent);
      opacity: 0;
      z-index: 99;
      animation: confetti-fall 3s ease-in-out forwards;
    }
    @keyframes confetti-fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
        padding: 0.8rem;
      }
      .user-info {
        flex-direction: column;
        gap: 0.8rem;
        font-size: 1.1rem;
        padding: 1rem;
      }
      .quiz-container {
        padding: 1.5rem;
      }
      .question {
        font-size: 1.4rem;
      }
      .option {
        font-size: 1.1rem;
        padding: 0.8rem;
      }
      .timer {
        font-size: 1.1rem;
      }
      .puzzle-animation {
        font-size: 2.5rem;
        top: -40px;
      }
    }
  </style>
</head>
<body>
  <h1 class="animate__animated animate__fadeInDown">üß† –û–Ω—å—Å–æ–≥–æ –¢–∞–∞—Ö</h1>
  <div class="user-info animate__animated animate__fadeIn">
    <div><span class="emoji">üåü</span> –û–Ω–æ–æ: <span id="score">0</span></div>
    <div><span class="emoji">‚ù§Ô∏è</span> –ê–º—å: <span id="lives">3</span></div>
    <div><span class="emoji">üèÜ</span> –¢“Ø–≤—à–∏–Ω: <span id="level">1</span></div>
  </div>
  <div class="quiz-container animate__animated animate__fadeIn">
    <div class="puzzle-animation">üß©</div>
    <div class="question-info" id="question-info">–û–Ω—å—Å–æ–≥–æ 1 / 15</div>
    <div class="question" id="question">–û–Ω—å—Å–æ–≥–æ —ç–Ω–¥ –≥–∞—Ä–Ω–∞...</div>
    <div class="options" id="options"></div>
    <div class="timer" id="timer">–•—É–≥–∞—Ü–∞–∞: 20 —Å–µ–∫—É–Ω–¥</div>
    <div class="progress-container">
      <div class="progress-text">
        <span>–î—É—É—Å–≥–∞—Å–∞–Ω</span>
        <span id="progress-text">0%</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
    </div>
  </div>
  <div class="button-container">
    <a href="game3.html" class="back-button animate__animated animate__fadeIn">–ë—É—Ü–∞—Ö</a>
    <button class="restart-button animate__animated animate__fadeIn" id="restart-button">–î–∞—Ö–∏–Ω —ç—Ö–ª—ç—Ö</button>
  </div>
  <div class="achievement-badge" id="achievement">
    <span class="achievement-icon">üéâ</span>
    <span class="achievement-text">–®–∏–Ω—ç –∞–º–∂–∏–ª—Ç!</span>
  </div>

  <script>
    let userData = JSON.parse(localStorage.getItem('mongolGameUser')) || {
      score: 0,
      lives: 3,
      level: 1,
      progress: { onisogo: 0, zuirug: 0, uv_soul: 0, naadam: 0, zui: 0 },
      levels: { horse: 1, onisogo: 1, zuirug: 1, uv_soul: 1, naadam: 1, zui: 1 },
      unlocked: ['onisogo'],
      achievements: []
    };
    const achievementBadge = document.getElementById('achievement');
    const questions = [
      {
        question: "–≠—Ä—ç—ç–Ω –¥—ç—ç—Å–∏–π–≥ —ç–≤—Ö—ç–∂ –±–æ–ª–¥–æ–≥–≥“Ø–π",
        options: ["–ú–æ–≥–æ–π", "–£—É—Ä–≥–∞", "–°–æ–ª–æ–Ω–≥–æ", "–≠—Ä–≤—ç—ç—Ö–∏–π"],
        correct: "–°–æ–ª–æ–Ω–≥–æ"
      },
      {
        question: "–•”©–ª–≥“Ø–π –±–∞–π–∂ —è–≤–¥–∞–≥ –Ω“Ø–¥–≥“Ø–π –±–∞–π–∂ —É–π–ª–¥–∞–≥",
        options: ["–°“Ø“Ø–¥—ç—Ä", "–ù–∞–π–∑", "“Æ“Ø–ª", "–ì—É—Ç–∞–ª"],
        correct: "“Æ“Ø–ª"
      },
      {
        question: "–£–ª–∏–∞—Å–Ω–∞–∞—Å —É–ª–∞–≤—á ”©–ª–≥”©”©—Ç—ç–π",
        options: ["–°–∞–º–∞—Ä", "–®“Ø—Ö—ç—Ä", "–ù–∞–≤—á", "–¢—É—É–ª–∞–π–Ω —á–∏—Ö"],
        correct: "–¢—É—É–ª–∞–π–Ω —á–∏—Ö"
      },
      {
        question: "–ì–∞–∑–∞—Ä –¥–æ–æ—Ä –ì–∞–Ω—Ç–∞–π —à–∞—Ä —Ç–æ—Å",
        options: ["–ê–ª—Ç", "–¢–∞—Ä–≤–∞–≥–∞", "–°—É—Ä", "–ù–∞—Ä"],
        correct: "–¢–∞—Ä–≤–∞–≥–∞"
      },
      {
        question: "–ú–æ–Ω–≥–æ–ª –≥–∞–∑—Ä—ã–Ω –º–æ–ª—Ç–æ–≥—á–∏–Ω –ú–æ–¥–æ–Ω –¥—ç—ç–≥“Ø“Ø—Ä –¥“Ø“Ø–ª—ç–≥—á–∏–Ω",
        options: ["–•—ç—Ä—ç–º", "–°–∞—Ä–º–∞–≥—á–∏–Ω", "–®—É–≤—É—É", "–¢–∞—Ä–≤–∞–≥–∞"],
        correct: "–•—ç—Ä—ç–º"
      },
      {
        question: "–ú–∞–ª–∏–≥–∞—Ä —Ö“Ø“Ø–≥–∏–π–Ω —Ç–æ–ª–≥–æ–π–¥ –ú–∞—Ä–≥–∞–¥ —ç—Ä–¥—ç–Ω—ç —Ö–∞—Ç–≥–∞–∞—Ç–∞–π",
        options: ["“Æ—Ö—ç—Ä", "–¢—ç–º—ç—ç", "–¢—É—Å–≥–∞–ª", "–ë—É–≥–∞"],
        correct: "–ë—É–≥–∞"
      },
      {
        question: "–•–∞—è—Å–Ω–∞–∞ —ç—Ä—Å—ç–Ω —à–∏–≥ —ç—Ä–≥—ç–ª–¥—ç–Ω—ç –•–∞–Ω–∏–∞–¥ —Ö“Ø—Ä—Å—ç–Ω —à–∏–≥ —à—É—É—Ö–∏—Ç–Ω–∞–Ω–∞",
        options: ["–ì–∞—Ö–∞–π", "–°–∞–ª—Ö–∏", "–£—Ç–∞–∞", "–≠–º—ç–≥—Ç—ç–π —Ö“Ø–Ω"],
        correct: "–ì–∞—Ö–∞–π"
      },
      {
        question: "–ë”©—Ö–∏–π–Ω –∑–æ–≥—Å–≤–æ–ª —Ö“Ø–Ω —à–∏–≥ –ë”©–≥—Ü–∏–π–Ω —Å—É—É–≤–∞–ª –Ω–æ—Ö–æ–π —à–∏–≥",
        options: ["–¢—É—É–ª–∞–π", "–•“Ø–Ω", "–°–∞—Ä–º–∞–≥—á–∏–Ω", "–ë–∏—á"],
        correct: "–°–∞—Ä–º–∞–≥—á–∏–Ω"
      },
      {
        question: "–£—É–ª —Ö–∞–¥–∞–Ω–¥ –æ—Ä—à–∏—Ö –æ—Ä–æ–Ω—Ç–æ–π –ê—Ä–∞–∞—Ç–∞–Ω –æ–ª–æ–Ω–¥–æ–æ –≤–∞–Ω –Ω—ç—Ä—Ç—ç–π",
        options: ["–ê—Ä—Å–ª–∞–Ω", "–ù–æ—Ö–æ–π", "–ë–∞—Ä", "–ë–∞–∞–≤–≥–∞–π"],
        correct: "–ë–∞—Ä"
      },
      {
        question: "–ì–∞–Ω–≥–∞–Ω —Ö“Ø“Ø—Ö—ç–Ω –ì–∞–Ω—Ü–∞–∞—Ä —è–≤–∞—Ö –∑–∞—è–∞—Ç–∞–π",
        options: ["–¢–æ–≥–æ—Å", "“Æ–Ω—ç–≥", "30 –≥–∞—Ä—Å–∞–Ω —ç–≥—á", "–¢–∞—Ä–≤–∞–≥–∞"],
        correct: "“Æ–Ω—ç–≥"
      },
      {
        question: "–ê—Ö –¥“Ø“Ø —Ç–∞–≤ –Ω—ç–≥ –∏–∂–∏–ª –Ω—ç—Ä—Ç—ç–π. ”®–Ω–¥”©—Ä –Ω–∞–º –±–∏–µ—Ç—ç–π",
        options: ["–•“Ø–Ω–∏–π —Ö—É—Ä—É—É", "5–Ω –∏—Ö—ç—Ä —Ö“Ø“Ø—Ö—ç–¥", "–ê–∂–ª—ã–Ω 5 ”©–¥”©—Ä", "–•–∞–¥–∞–≥"],
        correct: "–•“Ø–Ω–∏–π —Ö—É—Ä—É—É"
      },
      {
        question: "–¶–æ–Ω–¥–≥–æ—Ä –≥—ç–¥—ç—Å—Ç—ç–π, —Ü–æ—Ä–æ–≤–≥–æ—Ä —É—Ä—É—É–ª—Ç–∞–π, ”©—Ä”©”©—Å”©–Ω —á–∏—Ö—Ç—ç–π ”©–≥–ª”©–≥—á –∑–∞–Ω—Ç–∞–π",
        options: ["–ë–∞–∂–∏", "–Ø–ª–∞–ª—Ç", "–í–∞–∞—Ä", "–ì“Ø–∑—ç—ç—Ç—ç–π –∞—Ö –Ω–∞—Ä"],
        correct: "–í–∞–∞—Ä"
      },
      {
        question: "–•–∞—Ä —Ö—É—Ä–≥–∞, —è—Å–∞–Ω –±”©”©—Ä—Ç—ç–π",
        options: ["–•–∞—Ä —Ö“Ø–Ω", "–ú–æ–π–ª", "–•–∞—Ä —Ç”©”©–≥”©”©", "–¢“Ø–Ω—ç—Ä —Ö–∞—Ä–∞–Ω—Ö—É–π"],
        correct: "–ú–æ–π–ª"
      },
      {
        question: "”®–µ–≥ —Ü–∞—Ç–≥–∞–ª–∞–Ω –∞–∞–≤ –•–∞—Ç—É—É —Ö–∞—Ö–∏—Ä —ç—ç–∂",
        options: ["–ú–∞–Ω–∞–π —ç—ç–∂ –∞–∞–≤", "–ó—É–Ω ”©–≤”©–ª", "–ó—É–Ω —Ö–∞–≤–∞—Ä", "–ó—É–Ω –Ω–∞–º–∞—Ä"],
        correct: "–ó—É–Ω —Ö–∞–≤–∞—Ä"
      },
      {
        question: "–ß–∏–Ω–≥—ç–ª—Ç—ç–π–Ω –¥—ç—ç–≥“Ø“Ø—Ä –ß–∏–º—ç—ç–≥“Ø–π –Ω“Ø“Ø–¥—ç–ª",
        options: ["–ù“Ø“Ø–¥–ª–∏–π–Ω —à—É–≤—É—É", "–•–æ—Ç—ã–Ω –¥–∞—Ä–≥–∞", "–û–Ω–≥–æ—Ü", "“Æ“Ø–ª"],
        correct: "“Æ“Ø–ª"
      },
      {
        question: "–ë–∏–µ–∏–π –º–∏–Ω—å –±–∏—Ç–≥–∏–π —Ö”©–Ω–¥”©”©—Ä—ç–π –ë—è—Ü–∞—Ä–Ω–∞ –≥—ç–∂ –±–∞–π–Ω–∞–∞ –±–∏",
        options: ["”®–Ω–¥”©–≥", "–®“Ø“Ø–¥—ç—Ä", "–ë—è—Ü—Ö–∞–Ω –æ—Ö–∏–Ω", "–î–∞–≤—Å"],
        correct: "–®“Ø“Ø–¥—ç—Ä"
      },
      {
        question: "”®–Ω–≥”© –Ω—å —Ü–∞–≥–∞–∞–Ω –®–∏–Ω–≥—ç–Ω –Ω—å —Ö–∞—Ä",
        options: ["–ù“Ø–¥", "–°–∞—Ö–∞—Ä", "–¶–∞—Å", "“Æ“Ø–ª"],
        correct: "–¶–∞—Å"
      },
      {
        question: "–¢”©–º”©—Ä –∞–¥–∏–ª —Ö–∞—Ç—É—É –ê—Ç–≥–∞–∞–¥ –∞–≤–±–∞–ª —É—è—Å–∞–Ω–∞",
        options: ["–ú”©—Å", "–î–∞–≤—Å", "–ë–∞—Ä–∏–º–ª—ã–Ω —à–∞–≤–∞—Ä", "–¢”©–º”©—Ä"],
        correct: "–ú”©—Å"
      },
      {
        question: "–ë–∏–µ–≥“Ø–π –±–∞–π—Ç–ª–∞–∞ –ë“Ø–≥–¥–∏–π–≥ —á–∏—Ä—ç—Ö –≥—ç–Ω—ç",
        options: ["–°“Ø–Ω—Å", "–°–∞–ª—Ö–∏", "–û–Ω–≥–æ—Ü", "–ê–∞–≤"],
        correct: "–°–∞–ª—Ö–∏"
      },
      {
        question: "–ê–º–≥“Ø–π –±–∞–π–∂ –¥—É—É—Ç–∞–π –ê–º—å–≥“Ø–π –±–∞–π–∂ –Ω—ç—Ä—Ç—ç–π",
        options: ["–°“Ø–Ω—Å", "–°–∞–ª—Ö–∏", "–¶—É—É—Ä–∞–π", "“Æ“Ø–ª"],
        correct: "“Æ“Ø–ª"
      },
      {
        question: "–≠—Ä—ç—ç–Ω –¥—ç—ç—Å–∏–π–≥ —ç–≤—Ö—ç–∂ –±–æ–ª–¥–æ–≥–≥“Ø–π",
        options: ["–ú–æ–≥–æ–π", "–£—É—Ä–≥–∞", "–°–æ–ª–æ–Ω–≥–æ", "–≠—Ä–≤—ç—ç—Ö–∏–π"],
        correct: "–°–æ–ª–æ–Ω–≥–æ"
      },
      {
        question: "–•”©–ª–≥“Ø–π –±–∞–π–∂ —è–≤–¥–∞–≥ –Ω“Ø–¥–≥“Ø–π –±–∞–π–∂ —É–π–ª–¥–∞–≥",
        options: ["–°“Ø“Ø–¥—ç—Ä", "–ù–∞–π–∑", "“Æ“Ø–ª", "–ì—É—Ç–∞–ª"],
        correct: "“Æ“Ø–ª"
      },
      {
        question: "–£–ª–∏–∞—Å–Ω–∞–∞—Å —É–ª–∞–≤—á ”©–ª–≥”©”©—Ç—ç–π",
        options: ["–°–∞–º–∞—Ä", "–®“Ø—Ö—ç—Ä", "–ù–∞–≤—á", "–¢—É—É–ª–∞–π–Ω —á–∏—Ö"],
        correct: "–¢—É—É–ª–∞–π–Ω —á–∏—Ö"
      },
      {
        question: "–ì–∞–∑–∞—Ä –¥–æ–æ—Ä –ì–∞–Ω—Ç–∞–π —à–∞—Ä —Ç–æ—Å",
        options: ["–ê–ª—Ç", "–¢–∞—Ä–≤–∞–≥–∞", "–°—É—Ä", "–ù–∞—Ä"],
        correct: "–¢–∞—Ä–≤–∞–≥–∞"
      },
      {
        question: "–ú–æ–Ω–≥–æ–ª –≥–∞–∑—Ä—ã–Ω –º–æ–ª—Ç–æ–≥—á–∏–Ω –ú–æ–¥–æ–Ω –¥—ç—ç–≥“Ø“Ø—Ä –¥“Ø“Ø–ª—ç–≥—á–∏–Ω",
        options: ["–•—ç—Ä—ç–º", "–°–∞—Ä–º–∞–≥—á–∏–Ω", "–®—É–≤—É—É", "–¢–∞—Ä–≤–∞–≥–∞"],
        correct: "–•—ç—Ä—ç–º"
      }
    ];
    let shuffledQuestions = shuffleArray([...questions]);
    let currentQuestionIndex = 0;
    let correctAnswers = 0;
    let totalAnswers = 0;
    let timerInterval;
    let timeLeft = 20;

    document.getElementById('score').textContent = userData.score;
    document.getElementById('lives').textContent = userData.lives;
    document.getElementById('level').textContent = userData.levels.onisogo;
    updateProgressBar();
    loadQuestion();
    startTimer();
    showWelcomeMessage();

    function showWelcomeMessage() {
      const achievementText = document.querySelector('.achievement-text');
      achievementText.textContent = '–û–Ω—å—Å–æ–≥–æ–Ω—ã “Ø–µ–¥ —Ç–∞–≤—Ç–∞–π –º–æ—Ä–∏–ª! –ú—ç–¥–ª—ç–≥—ç—ç —Å–æ—Ä—å–∂ —É—Ö–∞–∞–Ω–∞–∞ —Ç—ç–ª—å–µ!';
      achievementBadge.classList.add('show');
      setTimeout(() => {
        achievementBadge.classList.remove('show');
      }, 2000);
    }

    function createConfetti() {
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.width = `${Math.random() * 8 + 4}px`;
        confetti.style.height = `${Math.random() * 8 + 4}px`;
        confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
        confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
        document.body.appendChild(confetti);
        setTimeout(() => {
          confetti.remove();
        }, 2000);
      }
    }

    function showAchievement(message) {
      const achievementText = document.querySelector('.achievement-text');
      achievementText.textContent = message;
      achievementBadge.classList.add('show');
      createConfetti();
      setTimeout(() => {
        achievementBadge.classList.remove('show');
      }, 2000);
      if (!userData.achievements.includes(message)) {
        userData.achievements.push(message);
        localStorage.setItem('mongolGameUser', JSON.stringify(userData));
      }
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function loadQuestion() {
      if (currentQuestionIndex >= shuffledQuestions.length) {
        endGame();
        return;
      }
      const currentQuestion = shuffledQuestions[currentQuestionIndex];
      document.getElementById('question').textContent = currentQuestion.question;
      document.getElementById('question-info').textContent = `–û–Ω—å—Å–æ–≥–æ ${currentQuestionIndex + 1} / ${shuffledQuestions.length}`;

      const optionsContainer = document.getElementById('options');
      optionsContainer.innerHTML = '';
      currentQuestion.options.forEach(option => {
        const optionElement = document.createElement('div');
        optionElement.classList.add('option');
        optionElement.textContent = option;
        optionElement.onclick = () => checkAnswer(option, optionElement);
        optionsContainer.appendChild(optionElement);
      });
      resetTimer();
    }

    function startTimer() {
      timeLeft = 20;
      document.getElementById('timer').textContent = `–•—É–≥–∞—Ü–∞–∞: ${timeLeft} —Å–µ–∫—É–Ω–¥`;
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `–•—É–≥–∞—Ü–∞–∞: ${timeLeft} —Å–µ–∫—É–Ω–¥`;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          checkAnswer(null, null);
        }
      }, 1000);
    }

    function resetTimer() {
      timeLeft = 20;
      document.getElementById('timer').textContent = `–•—É–≥–∞—Ü–∞–∞: ${timeLeft} —Å–µ–∫—É–Ω–¥`;
      clearInterval(timerInterval);
      startTimer();
    }

    function checkAnswer(selected, element) {
      clearInterval(timerInterval);
      const currentQuestion = shuffledQuestions[currentQuestionIndex];
      totalAnswers++;

      const timeBonus = Math.max(timeLeft, 0);
      const baseScore = 1;
      const bonusScore = Math.floor(timeBonus/3);
      const totalScore = baseScore + bonusScore;

      if (selected === currentQuestion.correct) {
        correctAnswers++;
        userData.score += totalScore;
        const timeBon = Math.min(Math.floor((timeLeft / 20)*7), 7);
        userData.progress.onisogo = Math.min((userData.progress.onisogo + timeBon), 100);
        const newLevel = Math.floor(userData.progress.onisogo / 20) + 1;
        if (newLevel > userData.levels.onisogo) {
          userData.levels.onisogo = newLevel;
          userData.level = Math.max(...Object.values(userData.levels));
          showAchievement(`–¢“Ø–≤—à–∏–Ω ${newLevel} —Ä—É—É –¥—ç–≤—à–ª—ç—ç!`);
          if (userData.progress.onisogo >= 100) {
            showAchievement('üéâ –û–Ω—å—Å–æ–≥–æ –±“Ø—Ä—ç–Ω —Ç–∞–∞–∂ –¥—É—É—Å–≥–∞–ª–∞–∞ –±–∞—è—Ä —Ö“Ø—Ä–≥—ç–µ!');
            endGame();
          }
        }
        if (element) element.classList.add('correct');
      } else {
        userData.lives = Math.max(userData.lives - 1, 0);
        showAchievement(selected ? 'üòï –ë—É—Ä—É—É —Ö–∞—Ä–∏—É–ª—Ç!' : 'üòï –•—É–≥–∞—Ü–∞–∞ –¥—É—É—Å–ª–∞–∞!');
        if (element) element.classList.add('incorrect');
        if (userData.lives === 0) {
          showAchievement('üò¢ –ê–º—å –¥—É—É—Å–ª–∞–∞! –¢–æ–≥–ª–æ–æ–º –¥—É—É—Å–ª–∞–∞.');
          endGame();
          return;
        }
      }

      document.getElementById('score').textContent = userData.score;
      document.getElementById('lives').textContent = userData.lives;
      document.getElementById('level').textContent = userData.levels.onisogo;
      updateProgressBar();
      localStorage.setItem('mongolGameUser', JSON.stringify(userData));

      document.querySelectorAll('.option').forEach(opt => opt.onclick = null);
      setTimeout(() => {
        currentQuestionIndex++;
        loadQuestion();
      }, 2000);
    }

    function updateProgressBar() {
      const fill = document.getElementById('progress-fill');
      const text = document.getElementById('progress-text');
      const val = userData.progress.onisogo;
      fill.style.width = `${val}%`;
      text.textContent = `${val}%`;
      if (val >= 100) {
        fill.style.background = 'linear-gradient(90deg, #22c55e, #86efac)';
      }
    }

    function endGame() {
      clearInterval(timerInterval);
      showAchievement(`üéÆ –¢–æ–≥–ª–æ–æ–º –¥—É—É—Å–ª–∞–∞! –¢–∞–Ω—ã –æ–Ω–æ–æ: ${userData.score}, –ó”©–≤ —Ö–∞—Ä–∏—É–ª—Ç: ${correctAnswers}/${totalAnswers}`);
      document.getElementById('question').textContent = '–¢–æ–≥–ª–æ–æ–º –¥—É—É—Å–ª–∞–∞!';
      document.getElementById('options').innerHTML = '';
      document.getElementById('timer').style.display = 'none';
      document.getElementById('question-info').style.display = 'none';
      document.getElementById('lives').textContent = userData.lives;
    }
    document.getElementById('restart-button').onclick = () => {
      shuffledQuestions = shuffleArray([...questions]);
      currentQuestionIndex = 0;
      correctAnswers = 0;
      totalAnswers = 0;
      userData.lives = 3;
      userData.progress.onisogo = 0;
      userData.score = 0;
      userData.levels.onisogo = 1;
      document.getElementById('lives').textContent = userData.lives;
      document.getElementById('level').textContent = userData.levels.onisogo;
      document.getElementById('score').textContent = userData.score;
      document.getElementById('progress-text').textContent = '0%';
      document.getElementById('progress-fill').style.width = '0%';
      document.getElementById('timer').style.display = 'block';
      document.getElementById('question-info').style.display = 'block';
      loadQuestion();
      startTimer();
    };
  </script>
</body>
</html>